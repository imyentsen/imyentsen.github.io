setwd("~/Dropbox/aalto/2019_D3/final/csv")
library(readr)
X2012 <- read_csv("2012.csv")
View(X2012)
library(readr)
X2017 <- read_csv("2017.csv")
View(X2017)
dim (X2012)
View(X2012)
View(X2017)
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
View(Outward)
View(Outward)
library(tidyverse)
install.packages("tidyverse", dependencies=TRUE)
library(tidyverse)
X2017[,c(4:8)]
Outward <- cbind(Outward, X2017[,c(4:8)])
library(tidyverse)
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, X2017[,c(4:8)])
View(Outward)
is.na(Outward)
is.na(Outward) <- 0
Outward[is.na(Outward)] <- 0
dim(Outward)
Outward <- Outward[,c(2:17)]
Outward <- Outward[,c(2:17)]
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, X2017[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, X2017[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2:17)]
View(Inward)
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, X2017[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, X2017[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
library(readr)
all <- read_csv("all.csv")
View(all)
View(all)
View(Inward)
isoCode <- all[c(1,3),]
View(isoCode)
View(isoCode)
isoCode <- all[,c(1,3)]
isoCode[120,1] <- Korea
isoCode[120,1] <- 'Korea'
Country <- c("Country")
Outward[,1] <- lapply(Country, function(x) isoCode[[x]][match(Outward$Country, isoCode$name)])
Outward[,1] <- lapply(isoCountry, function(x) isoCode[[x]][match(Outward$Country, isoCode$name)])
Outward[,1] <- lapply(isoCountry, function(x) isoCode[[x]][match(Outward$Country, isoCode$name)])
#library(tidyverse)
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, X2017[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, X2017[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
# ISO code
isoCode <- all[,c(1,3)]
isoCode[120,1] <- 'Korea'
isoCountry <- c("Country")
Outward[,1] <- lapply(isoCountry, function(x) isoCode[[x]][match(Outward$Country, isoCode$name)])
?lapply
#library(tidyverse)
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, X2017[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, X2017[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
# ISO code
isoCode <- all[,c(1,3)]
isoCode[120,1] <- 'Korea'
isoCountry <- c("Country")
Outward[,1] <- lapply(isoCountry, function(x) isoCode[[x]][match(isoCode$name, Outward$Country)])
#library(tidyverse)
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, X2017[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, X2017[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
# ISO code
isoCode <- all[,c(1,3)]
isoCode[120,1] <- 'Korea'
isoCountry <- c("Country")
Outward$Country
isoCode$name
isoCode[[1]]
isoCode[[2]]
Outward$Country
#library(tidyverse)
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, X2017[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, X2017[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
# ISO code
isoCode <- all[,c(1,3)]
isoCode[120,1] <- 'Korea'
isoCountry <- c("Country")
Outward$Country <- lapply(isoCountry, function(x) isoCode[[x]][match(isoCode$name, Outward$Country)])
match(isoCode$name, Outward$Country
a <- match(isoCode$name, Outward$Country
a <- match(isoCode$name, Outward$Country
a
a <- match(isoCode$name, Outward$Country)
a
#library(tidyverse)
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, X2017[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, X2017[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
# ISO code
isoCode <- all[,c(1,3)]
isoCode[120,1] <- 'Korea'
# Match
isoCountry <- c("Country")
a <- match(isoCode$name, Outward$Country)
a
# Match
isoCountry <- c("Country")
lapply(isoCountry, function(x) isoCode[[x]][match(isoCode$name, Outward$Country)])
lapply(Outward$Country, function(x) isoCode[[x]][match(isoCode$name, Outward$Country)])
lapply(Outward$Country, function(x) isoCode[x][match(isoCode$name, Outward$Country)])
lapply(isoCode[,2], function(x) isoCode[[x]][match(isoCode$name, Outward$Country)])
isoCode[is.na(a)]
isoCode[[is.na(a)]
]
isoCode[[is.na(a)]]
isoCode[1]
isoCode[,1]
isoCode[1,]
isoCode[[is.na(a)],]
isoCode[is.na(a)],]
isoCode[is.na(a),]
isoCode[!is.na(a),]
ls
ls()
#library(tidyverse)
rm(list = ls())
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, X2017[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, X2017[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
# ISO code
isoCode <- all[,c(1,3)]
isoCode[120,1] <- 'Korea'
# Match
MatchList <- match(isoCode$name, Outward$Country)
#library(tidyverse)
rm(list = ls())
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, X2017[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, X2017[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
# ISO code
isoCode <- all[,c(1,3)]
isoCode[120,1] <- 'Korea'
# Match
MatchList <- match(isoCode$name, Outward$Country)
#library(tidyverse)
rm(list = ls())
#Import
library(readr)
X2012 <- read_csv("2012.csv")
View(X2012)
X2017 <- read_csv("2017.csv")
View(X2017)
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, X2017[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, X2017[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
# ISO code
isoCode <- all[,c(1,3)]
isoCode[120,1] <- 'Korea'
# Match
MatchList <- match(isoCode$name, Outward$Country)
#isoCountry <- c("Country")
#Outward$Country <- lapply(isoCountry, function(x) isoCode[[x]][match(isoCode$name, Outward$Country)])
#library(tidyverse)
rm(list = ls())
#Import
library(readr)
X2012 <- read_csv("2012.csv")
View(X2012)
X2017 <- read_csv("2017.csv")
View(X2017)
IsoAll <- read_csv("all.csv")
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, X2017[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, X2017[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
# ISO code
isoCode <- IsoAll[,c(1,3)]
isoCode[120,1] <- 'Korea'
# Match
MatchList <- match(isoCode$name, Outward$Country)
#isoCountry <- c("Country")
#Outward$Country <- lapply(isoCountry, function(x) isoCode[[x]][match(isoCode$name, Outward$Country)])
View(Outward)
is.na(MatchList)
# Match
MatchList <- match(Outward$Country, isoCode$name)
is.na(MatchList)
MatchList
View(Outward17)
View(Outward)
# Match
MatchList <- match(Outward$Country, isoCode$name)
MatchList
rm(list = ls())
#Import
library(readr)
X2012 <- read_csv("2012.csv")
View(X2012)
X2017 <- read_csv("2017.csv")
View(X2017)
IsoAll <- read_csv("all.csv")
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
View(Outward17)
View(Outward17)
#library(tidyverse)
rm(list = ls())
#Import
library(readr)
X2012 <- read_csv("2012.csv")
View(X2012)
X2017 <- read_csv("2017.csv")
View(X2017)
IsoAll <- read_csv("all.csv")
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, Outward17[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, Inward17[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
# ISO code
isoCode <- IsoAll[,c(1,3)]
isoCode[120,1] <- 'Korea'
# Match
MatchList <- match(Outward$Country, isoCode$name)
MatchList
Outward[48,1]
isoCode[236,1]
is.na(MatchList)
which(MatchList)== NA
which(MatchList== NA)
which(is.na(MatchList))
Outward[48,1] <- isoCode[236,1]
Outward[11, 1] <- isoCode[60, 1]
Outward[17, 1] <- isoCode[235, 1]
Inward[48,1] <- isoCode[236,1]
Inward[11, 1] <- isoCode[60, 1]
Inward[17, 1] <- isoCode[235, 1]
MatchList <- match(Outward$Country, isoCode$name)
MatchList
# Make a vector for ISO code according to the order of Inward and Outward
isoOrder[1] <- lapply(isoOrder[1], function(x) isoCode[[x]][match(Outward$Country, isoCode$name)])
# Make a vector for ISO code according to the order of Inward and Outward
isoOrder <- c("iso_code")
isoOrder[1] <- lapply(isoOrder, function(x) isoCode[[x]][match(Outward$Country, isoCode$name)])
isoOrder[1] <- lapply(isoOrder, function(x) isoCode[[x]][match(Outward$Country, isoCode$name)])
isoCode[[x]][match(Outward$Country, isoCode$name)]
isoCode[[1]][match(Outward$Country, isoCode$name)]
isoCode[[1]]
isoCode[[2]]
match(Outward$Country, isoCode$name)
isoOrder[1] <- lapply(isoOrder, function(x) isoCode[[2]][match(Outward$Country, isoCode$name)])
View(isoOrder)
View(isoOrder)
isoOrder
View(X2017)
View(X2017)
isoOrder[1]
isoOrder <- isoOrder[1]
isoOrder <- unlist(isoOrder)
isoOrder_a <- rbindlist(isoOrder, fill=TRUE)
isoOrder_a <- flatten(isoOrder)
isoOrder_a <- flatten(isoOrder,)
isoOrder_a <- flatten(isoOrder)
isoOrder <- Unlist(isoOrder, depth = 1)
?Unlist
??Unlist
isoOrder <- unlist(isoOrder, depth = 1)
#library(tidyverse)
rm(list = ls())
#Import
library(readr)
X2012 <- read_csv("2012.csv")
View(X2012)
X2017 <- read_csv("2017.csv")
View(X2017)
IsoAll <- read_csv("all.csv")
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, Outward17[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, Inward17[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
# ISO code
isoCode <- IsoAll[,c(1,3)]
isoCode[120,1] <- 'Korea'
# Match
MatchList <- match(Outward$Country, isoCode$name)
# Correct the names of the countries
which(is.na(MatchList))
Outward[48,1] <- isoCode[236,1]
Outward[11, 1] <- isoCode[60, 1]
Outward[17, 1] <- isoCode[235, 1]
Inward[48,1] <- isoCode[236,1]
Inward[11, 1] <- isoCode[60, 1]
Inward[17, 1] <- isoCode[235, 1]
# Make a vector for ISO code according to the order of Inward and Outward
isoOrder <- c("iso_code")
isoOrder <- lapply(isoOrder, function(x) isoCode[[2]][match(Outward$Country, isoCode$name)])
View(isoOrder)
View(isoOrder)
View(isoOrder)
isoOrder <- data.frame(matrix(unlist(isoOrder), nrow=50, byrow=T))
View(isoOrder)
View(isoOrder)
colnames(isoOrder[1])
colnames(isoOrder[1]) <- 'iso'
colnames(isoOrder[1]) <- 'iso'
colnames(isoOrder[1]) <- "iso"
colnames(isoOrder[,1]) <- "iso"
colnames(isoOrder[1,]) <- "iso"
isoOrder[1,]
isoOrder[,1]
colnames(isoOrder[,1])
colnames(isoOrder[1])
# Merge the dataframe
Inward <- cbind(Inward, isoOrder)
View(Inward)
View(Inward)
Outward <-  cbind(Outward, isoOrder)
colnames(Inward[16])
colnames(Inward[16]) <- "iso"
colnames(Inward[16]) <- "iso"
colnames(Inward)
colnames(Inward[16]) <-  c("iso")
# Drop the observation for the total of the world
Inward <- Inward[1:48,50,]
#library(tidyverse)
rm(list = ls())
#Import
library(readr)
X2012 <- read_csv("2012.csv")
View(X2012)
X2017 <- read_csv("2017.csv")
View(X2017)
IsoAll <- read_csv("all.csv")
# Outward FDI
Outward <- X2012[X2012$'Direction of investment'=='Outward',]
Outward17 <- X2017[X2017$'Direction of investment'=='Outward',]
Outward <- cbind(Outward, Outward17[,c(4:8)])
Outward[is.na(Outward)] <- 0
Outward <- Outward[,c(2,4:17)]
# Inward FDI
Inward <- X2012[X2012$'Direction of investment'=='Inward',]
Inward17 <- X2017[X2017$'Direction of investment'=='Inward',]
Inward <- cbind(Inward, Inward17[,c(4:8)])
Inward[is.na(Inward)] <- 0
Inward <- Inward[,c(2,4:17)]
# ISO code
isoCode <- IsoAll[,c(1,3)]
isoCode[120,1] <- 'Korea'
# Match
MatchList <- match(Outward$Country, isoCode$name)
# Correct the names of the countries
which(is.na(MatchList))
Outward[48,1] <- isoCode[236,1]
Outward[11, 1] <- isoCode[60, 1]
Outward[17, 1] <- isoCode[235, 1]
Inward[48,1] <- isoCode[236,1]
Inward[11, 1] <- isoCode[60, 1]
Inward[17, 1] <- isoCode[235, 1]
# Make a vector for ISO code according to the order of Inward and Outward
isoOrder <- c("iso_code")
isoOrder <- lapply(isoOrder, function(x) isoCode[[2]][match(Outward$Country, isoCode$name)])
isoOrder <- data.frame(matrix(unlist(isoOrder), nrow=50, byrow=T))
colnames(isoOrder[1]) <- "iso"
# Merge the dataframes
Inward <- cbind(Inward, isoOrder)
Outward <-  cbind(Outward, isoOrder)
Inward[1:48,50,]
Inward[1:48,50]
Inward[1:48,]
# Drop the observation for the total of the world
Inward <- rbind(Inward[1:48,],Inward[50])
# Drop the observation for the total of the world
Inward <- rbind(Inward[1:48,],Inward[50,])
Inward
Outward <-  rbind(Outward[1:48,],Outward[50,])
# Export
write.csv(Inward,'inward.csv')
# Export
write.csv(Inward,'export/inward.csv')
# Export
write.csv(Inward,'export/inward.csv')
write.csv(Outward,'export/outward.csv')
