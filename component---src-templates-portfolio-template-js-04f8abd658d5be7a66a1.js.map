{"version":3,"file":"component---src-templates-portfolio-template-js-04f8abd658d5be7a66a1.js","mappings":"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","sources":["webpack://gatsby-starter-blog/./src/components/portfolio/Banner.js","webpack://gatsby-starter-blog/./src/components/portfolio/Outline.js","webpack://gatsby-starter-blog/./src/components/portfolio/Content.js","webpack://gatsby-starter-blog/./src/templates/PortfolioTemplate.js"],"sourcesContent":["import React from 'react';\nimport { GatsbyImage, getImage } from \"gatsby-plugin-image\";\n\nexport default function Banner({ frontmatter }) {\n  const imageData = getImage(frontmatter.coverImage);\n  if (!imageData) {\n    return null; // or a fallback component\n  }\n\n  return (\n    <section className=\"w-full\">\n      <div className=\"\">\n        <div className=\"content-container lg:px-6 md:px-3 px-2\">\n          <div className=\"py-8\">\n            <h1 className=\"font-['Syne'] font-medium text-[32px] leading-none text-foreground\">\n              {frontmatter.title}\n            </h1>\n          </div>\n\n        </div>\n\n          {/* GatsbyImage with class for size */}\n          {imageData && (\n            <GatsbyImage\n              image={imageData}\n              alt={frontmatter.title || \"Cover Image\"}\n              className=\"w-full h-[300px] sm:h-[400px] md:h-[500px] lg:h-[648px] rounded-md\"\n              style={{ objectFit: \"cover\" }}\n            />\n          )}\n<div className=\"content-container lg:px-6 md:px-3 px-2\">\n          <div className=\"py-6 max-w-[720px] lg:pb-20\">\n            <div className=\"flex items-center gap-8 mb-9 font-['Syne'] font-normal text-base text-[#555555]\">\n              <span>{frontmatter.org}</span>\n              <span>{frontmatter.year}</span>\n            </div>\n            <div className=\"font-['Syne'] font-normal text-[18px] text-[#555555] leading-normal\">\n              {frontmatter.desc}\n            </div>\n          </div>\n\n          {/* Decorative dots */}\n          <div className=\"px-0 lg:pb-20 pb-8\">\n            <div className=\"flex items-center gap-3\">\n              {Array.from({ length: 14 }, (_, i) => (\n                <div key={i} className=\"w-0.5 h-0.5 bg-[#ccc] rounded-full\" />\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\n\nexport default function Outline({ content, title }) {\n  const [activeHeading, setActiveHeading] = useState(\"\");\n  const safeContent = typeof content === \"string\" ? content : \"\";\n\n  const createSlug = (text) =>\n    text.toLowerCase().replace(/[^a-z0-9]+/g, \"-\").replace(/(^-|-$)/g, \"\");\n\n  const parseMarkdown = (markdown) => {\n    if (!markdown) return [];\n    const lines = markdown.trim().split(\"\\n\");\n    const elements = [];\n    let currentElement = null;\n\n    for (let line of lines) {\n      if (line.startsWith(\"# \")) {\n        elements.push({ type: \"h1\", content: line.replace(\"# \", \"\") });\n      } else if (line.startsWith(\"## \")) {\n        elements.push({ type: \"h2\", content: line.replace(\"## \", \"\") });\n      } else if (line.startsWith(\"### \")) {\n        elements.push({ type: \"h3\", content: line.replace(\"### \", \"\") });\n      } else if (line.startsWith(\"![\")) {\n        const match = line.match(/!\\[([^\\]]*)\\]\\(([^)]+)\\)/);\n        if (match) {\n          elements.push({ type: \"image\", alt: match[1], src: match[2] });\n        }\n      } else if (line.startsWith(\"- \")) {\n        if (currentElement?.type !== \"list\") {\n          currentElement = { type: \"list\", items: [] };\n          elements.push(currentElement);\n        }\n        currentElement.items.push(line.replace(\"- \", \"\"));\n      } else if (line.trim() === \"\") {\n        continue;\n      } else {\n        elements.push({ type: \"p\", content: line });\n      }\n    }\n    return elements;\n  };\n\n  const elements = parseMarkdown(safeContent);\n\n  const outlineItems = elements\n    .filter((el) => el.type === \"h1\")\n    .map((el) => ({\n      id: createSlug(el.content || \"\"),\n      title: el.content || \"\",\n    }));\n\n  const scrollToHeading = (id) => {\n    setActiveHeading(id); // 立即設定當前\n    const element = document.getElementById(id);\n    if (element) {\n      element.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n    }\n  };\n\n  useEffect(() => {\n    if (!outlineItems.length) return;\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) setActiveHeading(entry.target.id);\n        });\n      },\n      { rootMargin: \"-20% 0px -80% 0px\", threshold: 0 }\n    );\n\n    outlineItems.forEach((item) => {\n      const element = document.getElementById(item.id);\n      if (element) observer.observe(element);\n    });\n\n    return () => observer.disconnect();\n  }, [outlineItems]);\n\n  if (!outlineItems.length && !title) return null;\n\n  return (\n    <div className=\"w-full\">\n      <div className=\"box-border flex flex-col items-start justify-start px-0 py-6 relative size-full\">\n        {/* 文章 Title */}\n        {title && (\n          <h1 className=\"font-['Syne'] font-normal leading-tight text-[18px] font-medium mb-6 w-full text-black\">\n            {title}\n          </h1>\n\n        )}\n        {/* 目錄列表 */}\n        {outlineItems.map((item) => (\n          <div\n            key={item.id}\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => scrollToHeading(item.id)}\n            onKeyDown={(e) =>\n              (e.key === \"Enter\" || e.key === \" \") && scrollToHeading(item.id)\n            }\n            className={`box-border flex flex-row gap-2 items-center justify-center px-3 py-1 relative shrink-0 cursor-pointer transition-all duration-200 hover:text-[#111111] w-full ${\n              activeHeading === item.id ? \"text-[#111111]\" : \"\"\n            }`}\n          >\n            <div\n              aria-hidden=\"true\"\n              className={`absolute inset-0 pointer-events-none ${\n                activeHeading === item.id\n                  ? \"border-[#585858] border-l-2\"\n                  : \"border-[#ccc] border-l-2\"\n              }`}\n            />\n            <div\n              className={`font-['Syne'] font-normal leading-[0] relative shrink-0 text-[18px] flex-1 ${\n                activeHeading === item.id ? \"text-[#111111]\" : \"text-[#767676]\"\n              }`}\n            >\n              <p className=\"block leading-normal\">{item.title}</p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport Outline from \"./Outline\";\n\nexport default function Content({ markdownHtml, markdownRaw, title }) {\n  const createSlug = (text) =>\n    text.toLowerCase().replace(/[^a-z0-9]+/g, \"-\").replace(/(^-|-$)/g, \"\");\n\n  // 加 id 並保留原 h1 屬性（class、style 等）\n  const addHeadingIds = (html) => {\n    if (!html) return \"\";\n    return html.replace(\n      /<h1([^>]*)>(.*?)<\\/h1>/g,\n      (match, attrs, text) => {\n        if (/id=/.test(attrs)) return match; // 有 id 就不處理\n        return `<h1${attrs} id=\"${createSlug(text)}\">${text}</h1>`;\n      }\n    );\n  };\n\n  if (!markdownHtml) {\n    return <p className=\"px-6\">Loading content...</p>;\n  }\n\n  const processedHtml = addHeadingIds(markdownHtml);\n\n  return (\n    <div className=\"mx-auto\">\n      <div className=\"grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-8\">\n        \n        {/* 左側文章內容 */}\n        <div className=\"w-full lg:px-6 md:px-3 px-2\">\n          <article\n            className=\"\n              prose prose-lg\n              prose-headings:font-['Syne'] prose-headings:font-medium\n              prose-p:text-[18px] prose-p:leading-7\n              prose-img:rounded-md prose-img:mx-auto\n            \"\n            dangerouslySetInnerHTML={{ __html: processedHtml }}\n          />\n        </div>\n        \n        {/* 右側 Outline */}\n        <div className=\"hidden lg:block px-4\">\n          <div className=\"sticky top-24\">\n            <Outline content={markdownRaw || \"\"} title={title || \"\"} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { graphql } from \"gatsby\";\nimport Layout from \"../components/layout/Layout\";\nimport Banner from \"../components/portfolio/Banner\";\nimport Content from \"../components/portfolio/Content\";\n\nexport default function PortfolioTemplate({ data }) {\n  const { frontmatter, html, rawMarkdownBody } = data.markdownRemark;\n\n  return (\n    <Layout className=\"portfolio-content\">\n      <div className=\"portfolio-hero\">\n        <Banner frontmatter={frontmatter} />\n        <Content markdownHtml={html} markdownRaw={rawMarkdownBody} title={frontmatter.title} />\n      </div>\n    </Layout>\n  );\n}\n\nexport const pageQuery = graphql`\n  query PortfolioById($id: String!) {\n    markdownRemark(id: { eq: $id }) {\n      frontmatter {\n        title\n        org\n        year\n        coverImage {\n          childImageSharp {\n            gatsbyImageData(width: 720, placeholder: BLURRED)\n          }\n          publicURL\n        }\n        desc\n      }\n      html\n      rawMarkdownBody\n    }\n  }\n`;\n"],"names":["Banner","_ref","frontmatter","imageData","getImage","coverImage","React","className","title","GatsbyImage","image","alt","style","objectFit","org","year","desc","Array","from","length","_","i","key","Outline","content","activeHeading","setActiveHeading","useState","outlineItems","markdown","lines","trim","split","elements","currentElement","line","startsWith","push","type","replace","match","src","_currentElement","items","parseMarkdown","filter","el","map","id","text","toLowerCase","scrollToHeading","element","document","getElementById","scrollIntoView","behavior","block","useEffect","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","target","rootMargin","threshold","item","observe","disconnect","role","tabIndex","onClick","onKeyDown","e","Content","markdownHtml","markdownRaw","processedHtml","html","attrs","test","createSlug","dangerouslySetInnerHTML","__html","PortfolioTemplate","data","rawMarkdownBody","markdownRemark","Layout"],"sourceRoot":""}